echo "ğŸ” Running pre-commit checks..."
echo ""

# Type checking for the entire project
echo "ğŸ” [TYPE CHECK] Checking TypeScript types..."
yarn ts-check
if [ $? -ne 0 ]; then
  echo "âŒ Type checking failed. Please fix TypeScript errors before committing."
  exit 1
fi
echo "âœ… Type checking passed!"
echo ""

# Frontend checks
if [ -d "frontend" ]; then
  echo "ï¿½ï¿½ [FRONTEND] Checking code quality..."
  cd frontend
  npx lint-staged
  if [ $? -ne 0 ]; then
    echo "âŒ Frontend code quality checks failed"
    exit 1
  fi
  cd ..
  echo "âœ… Frontend checks passed!"
fi

# Backend checks  
if [ -d "backend" ]; then
  echo "âš™ï¸  [BACKEND] Checking code quality..."
  cd backend
  npx lint-staged
  if [ $? -ne 0 ]; then
    echo "âŒ Backend code quality checks failed"
    exit 1
  fi
  cd ..
  echo "âœ… Backend checks passed!"
fi

echo ""
echo "ğŸ‰ All pre-commit checks passed! Your code is ready to commit."
echo ""
