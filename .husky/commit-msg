#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

commit_msg_file="$1"
commit_msg=$(cat "$commit_msg_file")
regex_pattern="^(fix|feat|create|add|refactor|update|remove)(-#[0-9]+)?: .+$"

if [[ $commit_msg =~ $regex_pattern ]]; then
  echo ""
  echo "âœ… Great! Your commit message follows our guidelines."
  echo "ğŸš€ Thank you for contributing to Giglance!"
  echo ""
else
  echo ""
  echo "âŒ Oops! Your commit message doesn't follow our guidelines."
  echo ""
  echo "ğŸ“ Commit format should be:"
  echo "<type>-#<issue>: <description>   # if you have an issue"
  echo "<type>: <description>            # if no issue"
  echo ""
  echo "ğŸ“‹ Available types:"
  echo "â€¢ feat: new features"
  echo "â€¢ fix: bug fixes" 
  echo "â€¢ create: new files or directories"
  echo "â€¢ add: additional functionality"
  echo "â€¢ refactor: code improvements"
  echo "â€¢ update: dependency updates"
  echo "â€¢ remove: code removal"
  echo ""
  echo "âœ… Examples:"
  echo "feat-#123: add user authentication"
  echo "fix: resolve login validation bug"
  echo ""
  echo "ğŸ“– Read more in CONTRIBUTING.md"
  echo ""
  exit 1
fi